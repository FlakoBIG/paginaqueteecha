<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Abrir apps (clean)</title>
  <style>
    :root{--bg:#dfffd8;--card:#ffffff;--text:#072019}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
    .wrap{max-width:720px;margin:28px auto;padding:18px;background:var(--card);border-radius:12px}
    h1{font-size:18px;margin:0 0 8px}
    p.note{margin:0 0 12px;color:#254a32;font-size:13px}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    button.btn{padding:12px;border-radius:10px;border:0;background:#f2fff6;cursor:pointer;font-size:14px}
    footer{margin-top:12px;font-size:13px;color:#325139}
    .small{font-family:monospace;font-size:12px;margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Abrir apps desde el navegador</h1>
    <p class="note">Intentará abrir las apps instaladas automáticamente. Más fiable en <strong>Chrome para Android</strong>. Si no funciona, el botón intenta un fallback web o abre un selector (galería/cámara).</p>

    <div class="grid">
      <button class="btn" onclick="openSettings()">⚙️ Ajustes</button>
      <button class="btn" onclick="openGallery()">🖼️ Galería</button>

      <button class="btn" onclick="openCamera()">📷 Cámara</button>
      <button class="btn" onclick="openGmail()">✉️ Gmail</button>

      <button class="btn" onclick="openYouTube()">▶️ YouTube</button>
      <button class="btn" onclick="openMaps()">🗺️ Maps</button>

      <button class="btn" onclick="openWhatsApp()">💬 WhatsApp</button>
      <button class="btn" onclick="openTelegram()">📨 Telegram</button>

      <button class="btn" onclick="openInstagram()">📷 Instagram</button>
      <button class="btn" onclick="openFacebook()">📘 Facebook</button>

      <button class="btn" onclick="openTwitter()">🐦 X / Twitter</button>
      <button class="btn" onclick="openPlayStore()">🛒 Play Store</button>

      <button class="btn" onclick="openPhoneDialer()">📞 Teléfono</button>
      <button class="btn" onclick="openSms()">📩 SMS</button>

      <button class="btn" onclick="openCalendar()">📆 Calendario</button>
      <button class="btn" onclick="openChrome()">🌐 Abrir Chrome</button>
    </div>

    <footer>
      <div class="small">Archivo: index_open_apps_clean.html</div>
    </footer>
  </div>

  <script>
    const ua = navigator.userAgent || '';
    const isAndroid = /android/i.test(ua);
    const isIOS = /iP(hone|ad|od)/i.test(ua) && !window.MSStream;
    const isChromeOnAndroid = isAndroid && /Chrome\/\d+/.test(ua) && !/OPR|Edg|SamsungBrowser|FxiOS|CriOS/.test(ua);

    // Método general: si Chrome en Android -> usar intent: (más fiable). Si iOS -> iframe forzado. Otros -> click en enlace.
    function openWith({scheme, intent, fallback, useIframeForIOS=false}){
      if(isChromeOnAndroid && intent){
        window.location.href = intent;
        return;
      }

      if(isIOS && useIframeForIOS && scheme){
        const iframe = document.createElement('iframe');
        iframe.style.display='none';
        iframe.src = scheme;
        document.body.appendChild(iframe);
        setTimeout(()=>{ document.body.removeChild(iframe); if(fallback) window.location.href = fallback; }, 900);
        return;
      }

      if(scheme){
        const a = document.createElement('a');
        a.href = scheme;
        document.body.appendChild(a);
        a.click();
        setTimeout(()=>{ try{ document.body.removeChild(a);}catch(e){} if(fallback) window.location.href = fallback; }, 800);
        return;
      }

      if(fallback) window.location.href = fallback;
    }

    // Buttons implementations
    function openSettings(){
      // Intent para abrir Ajustes en Android (Chrome). En iOS suele bloquearse.
      openWith({
        intent: 'intent:#Intent;action=android.settings.SETTINGS;end',
        scheme: 'app-settings:', // placeholder; la mayoría de navs lo ignorarán
        fallback: 'https://support.google.com/android/answer/7680439',
        useIframeForIOS: false
      });
    }

    function openGallery(){
      // Para abrir galería: input file sin capture suele abrir selector de galería
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';
      input.multiple = false;
      input.style.display = 'none';
      document.body.appendChild(input);
      input.addEventListener('change', ()=>{ document.body.removeChild(input); });
      input.click();
    }

    function openCamera(){
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';
      input.capture = 'environment';
      input.style.display = 'none';
      document.body.appendChild(input);
      input.addEventListener('change', ()=>{ document.body.removeChild(input); });
      input.click();
    }

    function openGmail(){
      openWith({
        scheme: 'googlegmail://inbox',
        intent: 'intent://inbox#Intent;package=com.google.android.gm;scheme=googlegmail;end;',
        fallback: 'https://mail.google.com/'
      });
    }

    function openYouTube(){ openWith({scheme:'youtube://', intent:'intent://www.youtube.com/#Intent;package=com.google.android.youtube;scheme=https;end;', fallback:'https://www.youtube.com/'}); }
    function openMaps(){ openWith({scheme:'geo:0,0?q=', intent:'intent://maps.google.com/#Intent;package=com.google.android.apps.maps;scheme=https;end;', fallback:'https://www.google.com/maps'}); }
    function openWhatsApp(){ openWith({scheme:'whatsapp://send?text=Hola', fallback:'https://wa.me/?text=Hola'}); }
    function openTelegram(){ openWith({scheme:'tg://', fallback:'https://t.me/'}); }
    function openInstagram(){ openWith({scheme:'instagram://user', fallback:'https://www.instagram.com/'}); }
    function openFacebook(){ openWith({scheme:'fb://', fallback:'https://www.facebook.com/'}); }
    function openTwitter(){ openWith({scheme:'twitter://', fallback:'https://twitter.com/'}); }
    function openPlayStore(){ openWith({intent:'intent://details?id=com.android.vending#Intent;package=com.android.vending;scheme=market;end;', fallback:'https://play.google.com/store'}); }
    function openPhoneDialer(){ openWith({scheme:'tel:+56900000000'}); }
    function openSms(){ openWith({scheme:'sms:+56900000000?body=Hola'}); }
    function openCalendar(){ openWith({scheme:'content://com.android.calendar/time/'}); }
    function openChrome(){ openWith({scheme:'googlechrome://', fallback:'https://www.google.com'}); }

  </script>
</body>
</html>
